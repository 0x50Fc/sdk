"use strict";var paymentUrl=require("../../../../config").paymentUrl,app=getApp();Page({onShareAppMessage:function(){return{title:"发起支付",path:"page/API/pages/request-payment/request-payment"}},onLoad:function(){},requestPayment:function(){var t=this;t.setData({loading:!0}),app.getUserOpenId(function(e,a){e?(console.log("err:",e),t.setData({loading:!1})):wx.request({url:paymentUrl,data:{openid:a},method:"POST",success:function(e){console.log("unified order success, response is:",e);var a=e.data.payargs;wx.requestPayment({timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign}),t.setData({loading:!1})}})})}});