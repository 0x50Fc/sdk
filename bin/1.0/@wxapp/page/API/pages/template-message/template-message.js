"use strict";var templateMessageUrl=require("../../../../config").templateMessageUrl,app=getApp(),formData={address:"T.I.T 造舰厂",time:"2017.01.09",name:"帝国歼星舰",serial:"123456789"};Page({onShareAppMessage:function(){return{title:"模板消息",path:"page/API/pages/template-message/template-message"}},onLoad:function(){this.setData({formData:formData})},submitForm:function(e){var t=this,s=e.detail.formId,o=e.detail.value;console.log("form_id is:",s),t.setData({loading:!0}),app.getUserOpenId(function(e,a){e?console.log("err:",e):wx.request({url:templateMessageUrl,method:"POST",data:{form_id:s,openid:a,formData:o},success:function(e){console.log("submit form success",e),wx.showToast({title:"发送成功",icon:"success"}),t.setData({loading:!1})},fail:function(e){var a=e.errMsg;console.log("submit form fail, errMsg is:",a)}})})}});