"use strict";Page({onShareAppMessage:function(){return{title:"文件",path:"page/API/pages/file/file"}},onLoad:function(){this.setData({savedFilePath:wx.getStorageSync("savedFilePath")})},data:{tempFilePath:"",savedFilePath:"",dialog:{hidden:!0}},chooseImage:function(){var e=this;wx.chooseImage({count:1,success:function(t){e.setData({tempFilePath:t.tempFilePaths[0]})}})},saveFile:function(){if(0<this.data.tempFilePath.length){var e=this;wx.saveFile({tempFilePath:this.data.tempFilePath,success:function(t){e.setData({savedFilePath:t.savedFilePath}),wx.setStorageSync("savedFilePath",t.savedFilePath),e.setData({dialog:{title:"保存成功",content:"下次进入应用时，此文件仍可用",hidden:!1}})},fail:function(){e.setData({dialog:{title:"保存失败",content:"应该是有 bug 吧",hidden:!1}})}})}},clear:function(){wx.setStorageSync("savedFilePath",""),this.setData({tempFilePath:"",savedFilePath:""})},confirm:function(){this.setData({"dialog.hidden":!0})}});